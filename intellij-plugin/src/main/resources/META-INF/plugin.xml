<idea-plugin>
    <id>com.qai.plugin</id>
    <name>QAI - QA Automation AI Agent</name>
    <version>0.1.0</version>
    <vendor url="https://github.com/your-org/QAI">QAI</vendor>

    <description><![CDATA[
        QAI brings the QA Automation AI Agent directly into your IDE.<br><br>
        <b>Features:</b>
        <ul>
          <li>Chat with AI models (Ollama, OpenAI, Anthropic, xAI, Zen) without leaving the IDE</li>
          <li>Provider and mode (Chat / Agent) selector in the tool window toolbar</li>
          <li>Persistent API token and Ollama URL via Settings → Tools → QAI</li>
          <li>Conversation memory across turns within a session</li>
          <li>Ctrl+Enter to send, Clear button to reset the conversation</li>
        </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">

        <!-- Persistent settings service (application-level) -->
        <applicationService
            serviceImplementation="com.qai.plugin.QaiSettings"
        />

        <!-- Settings → Tools → QAI configurable page -->
        <applicationConfigurable
            parentId="tools"
            id="com.qai.plugin.QaiSettingsConfigurable"
            displayName="QAI"
            instance="com.qai.plugin.QaiSettingsConfigurable"
        />

        <!-- Tool window -->
        <toolWindow
            id="QAI"
            anchor="right"
            factoryClass="com.qai.plugin.QaiToolWindowFactory"
            icon="/icons/pluginIcon.svg"
        />

        <!-- Startup check for qai-cli binary -->
        <postStartupActivity
            implementation="com.qai.plugin.QaiStartupActivity"
        />

        <!-- Notification group for missing-binary warnings -->
        <notificationGroup
            id="QAI Notifications"
            displayType="BALLOON"
        />

    </extensions>
</idea-plugin>
